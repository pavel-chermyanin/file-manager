(()=>{"use strict";var e={514:(e,t,l)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createDirectory=void 0;var d=l(263),a=l(519),n=l(477),o=l(154),s=l(743);t.createDirectory=function(){if(a.state.selectedElement){var e=prompt("Введите имя директории","");if(null!==e&&""!==e.trim()){var t=(0,d.createTreeElement)(e,"folder"),l=a.state.selectedElement.querySelector("ul");a.state.selectedElement.classList.add("arrow-down");var i=t.querySelector(".toggle-icon");"li"===a.state.selectedElement.tagName.toLowerCase()&&l&&(l.appendChild(t),l.classList.add("nested")),t.addEventListener("click",(function(e){e.stopPropagation(),(0,n.selectElement)(t)})),i.addEventListener("click",(function(e){e.stopPropagation(),i&&(0,o.toggleNested)(i)})),(0,s.updateNestedState)(t)}}else alert("Выберите элемент, к которому хотите добавить директорию или файл.")}},155:(e,t,l)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createEditorTab=void 0;var d=l(519),a=l(477),n=l(532);t.createEditorTab=function(e){var t,l,o;if(!(null===(t=d.state.tabs)||void 0===t?void 0:t.includes(e))){console.log("createEditorTab");var s=document.querySelector(".file-editor__tabs"),i=document.createElement("li");i.textContent=e.fileName,i.classList.add("file-editor__tab"),null===(l=null===d.state||void 0===d.state?void 0:d.state.tabs)||void 0===l||l.push(e),e.tabElement=i,null==s||s.append(i),null===(o=null===d.state||void 0===d.state?void 0:d.state.tabs)||void 0===o||o.push(e),d.state.selectedTab=e,(0,n.updateTabSelection)(),i.addEventListener("click",(function(e){!function(e){var t;console.log(e.target);var l=null===(t=d.state.tabs)||void 0===t?void 0:t.find((function(t){return t.tabElement===e.target}));l&&(d.state.selectedTab=l,(0,n.updateTabSelection)(),console.log(d.state.selectedElement,l.$el),l.$el&&(0,a.selectElement)(l.$el))}(e)}))}}},263:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createTreeElement=void 0,t.createTreeElement=function(e,t){var l=document.createElement("li"),d=document.createElement("span");d.classList.add("toggle-icon"),l.classList.add(t),l.append(d);var a=document.createElement("span");a.classList.add("type-icon"),l.append(a);var n=document.createElement("span");if(n.textContent=e,n.classList.add("label"),l.append(n),"file"===t){var o=document.createElement("img");o.src="images/file.jpg",o.alt="file img",o.classList.add("file-icon"),l.append(o)}var s=document.createElement("ul");return l.append(s),l.setAttribute("data-type",t),l}},519:(e,t,l)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.btnUploadFile=t.btnRemoveFolder=t.btnAddFolder=t.state=void 0;var d=l(477),a=l(263),n=l(514),o=l(743),s=l(154),i=l(583),r=l(688);t.state={selectedElement:null,uploadedFiles:[],selectedTab:null,tabs:[]},t.btnAddFolder=document.querySelector(".btn-add-folder"),null===t.btnAddFolder||void 0===t.btnAddFolder||t.btnAddFolder.addEventListener("click",n.createDirectory),t.btnRemoveFolder=document.querySelector(".btn-remove-folder"),null===t.btnRemoveFolder||void 0===t.btnRemoveFolder||t.btnRemoveFolder.addEventListener("click",i.removeFolder),t.btnUploadFile=document.querySelector(".upload-file"),null===t.btnUploadFile||void 0===t.btnUploadFile||t.btnUploadFile.addEventListener("click",r.uploadFile),document.addEventListener("DOMContentLoaded",(function(){var e,t=(0,a.createTreeElement)("Root","folder");t.addEventListener("click",(function(e){e.stopPropagation(),(0,d.selectElement)(t)}));var l=t.querySelector(".toggle-icon");l.addEventListener("click",(function(e){e.stopPropagation(),l&&(0,s.toggleNested)(l)})),(0,o.updateNestedState)(t),null===(e=document.getElementById("tree-container"))||void 0===e||e.append(t)}))},583:(e,t,l)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.removeFolder=void 0;var d=l(519);t.removeFolder=function(){var e,t,l,a;if(d.state.selectedElement){var n=d.state.selectedElement.parentElement;confirm("Вы уверены, что хотите удалить этот элемент?")&&(n.removeChild(d.state.selectedElement),d.state.selectedElement=null,(null===(l=null===(t=null===(e=null==n?void 0:n.parentElement)||void 0===e?void 0:e.querySelector("ul"))||void 0===t?void 0:t.children)||void 0===l?void 0:l.length)||null===(a=n.parentElement)||void 0===a||a.classList.remove("arrow-down"))}else alert("Выберите элемент, к которому хотите добавить директорию или файл.")}},477:(e,t,l)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.selectElement=void 0;var d=l(519),a=l(532);t.selectElement=function(e){var t;d.state.selectedElement&&d.state.selectedElement.classList.remove("selected"),d.state.selectedElement=e,d.state.selectedElement.classList.add("selected"),d.btnRemoveFolder.disabled=!1,d.btnAddFolder.disabled=!1,d.btnUploadFile.disabled=!1;var l=d.state.selectedElement.getAttribute("data-type");d.state.tabs&&(console.log("selectedTab"),d.state.selectedTab=null===(t=d.state.tabs)||void 0===t?void 0:t.find((function(t){return t.$el===e}))),(0,a.updateTabSelection)(),d.btnRemoveFolder.disabled=document.getElementById("tree-container")===d.state.selectedElement.parentElement,"file"===l&&(d.btnRemoveFolder.disabled=!0,d.btnAddFolder.disabled=!0,d.btnUploadFile.disabled=!0,console.log(d.state.selectedElement,d.state.selectedTab,d.state.tabs))}},154:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.toggleNested=void 0,t.toggleNested=function(e){var t,l=null===(t=null==e?void 0:e.parentElement)||void 0===t?void 0:t.querySelector("ul");l&&l.classList.toggle("nested")}},743:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.updateNestedState=void 0,t.updateNestedState=function(e){for(var t=e;t&&"li"===t.tagName.toLowerCase();){var l=t.querySelector("ul");l&&l.classList.add("nested"),t=t.parentElement}}},532:(e,t,l)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.updateTabSelection=void 0;var d=l(519);t.updateTabSelection=function(){var e,t,l;null===(e=d.state.tabs)||void 0===e||e.forEach((function(e){var t;null===(t=e.tabElement)||void 0===t||t.classList.remove("selected")})),null===(l=null===(t=d.state.selectedTab)||void 0===t?void 0:t.tabElement)||void 0===l||l.classList.add("selected")}},688:(e,t,l)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.uploadFile=void 0;var d=l(155),a=l(263),n=l(519),o=l(477),s=l(743);t.uploadFile=function(){if(n.state.selectedElement){var e=document.createElement("input");e.type="file",e.addEventListener("change",(function(e){var t,l,i,r=null===(t=e.target.files)||void 0===t?void 0:t[0],c={fileContent:"",fileName:"",$el:null};if(r){if(r.type.startsWith("text")){var u=(0,a.createTreeElement)(r.name,"file"),v=null===(l=null===n.state||void 0===n.state?void 0:n.state.selectedElement)||void 0===l?void 0:l.querySelector("ul");"li"===(null===(i=null===n.state||void 0===n.state?void 0:n.state.selectedElement)||void 0===i?void 0:i.tagName.toLowerCase())&&v&&(v.appendChild(u),v.classList.add("nested"));var m=new FileReader;m.onload=function(){var e=m.result;c.fileContent=e,c.fileName=r.name,c.$el=u,u.addEventListener("click",(function(e){e.stopPropagation(),(0,o.selectElement)(u)})),(0,s.updateNestedState)(u),n.state.uploadedFiles.push(c),(0,d.createEditorTab)(c)},m.readAsText(r)}else alert("Выбранный файл не является текстовым файлом.");console.log(n.state.uploadedFiles)}})),e.click()}else alert("Выберите элемент, к которому хотите загрузить файл.")}}},t={};!function l(d){var a=t[d];if(void 0!==a)return a.exports;var n=t[d]={exports:{}};return e[d](n,n.exports,l),n.exports}(519)})();